namespace SpriteKind {
    export const flower = SpriteKind.create()
    export const block = SpriteKind.create()
    export const blocks = SpriteKind.create()
    export const finish = SpriteKind.create()
    export const lava = SpriteKind.create()
}
controller.up.onEvent(ControllerButtonEvent.Pressed, function () {
    if (mySprite.isHittingTile(CollisionDirection.Bottom)) {
        mySprite.vy = -200
    }
})
function dialouge () {
    narrator = sprites.create(img`
        ................................................................
        ................................................................
        ................................................................
        ................................................................
        ................................................................
        ................................................................
        ................................................................
        ................................................................
        ................................................................
        ................................................................
        ................................................................
        ................................................................
        ................................................................
        ................................................................
        ................................................................
        ................................................................
        ...........................fffffff..............................
        ..........................fdddddddf.............................
        .........................fdddddddddf............................
        ........................fdddddddddddf...........................
        ........................fdddddddddddf...........................
        ........................fdddddddddddf...........................
        ........................fdddddddddddf...........................
        ........................fdddddddddddf...........................
        ........................fdddddddddddf...........................
        ........................fdddddddddddf...........................
        ........................fdddddddddddf...........................
        ........................fdddddddddddf...........................
        .........................fdddddddddf............................
        ..........................fdddddddf.............................
        ...........................fdddddf..............................
        ............................fdddf...............................
        ............................fffff...............................
        ............................f...f...............................
        ...........................ff...ff..............................
        ........................fff.f...f.fff...........................
        ....................ffff....f...f....ffff.......................
        ...................f.....................f......................
        ..................f.......................f.....................
        ..................f.......................f.....................
        ..................f.......................f.....................
        ..................f.......................f.....................
        ..................f.......................f.....................
        ..................f.......................f.....................
        ..................f.......................f.....................
        ..................f.......................f.....................
        ..................f.......................ff....................
        ................................................................
        ................................................................
        ................................................................
        ................................................................
        ................................................................
        ................................................................
        ................................................................
        ................................................................
        ................................................................
        ................................................................
        ................................................................
        ................................................................
        ................................................................
        ................................................................
        ................................................................
        ................................................................
        ................................................................
        `, SpriteKind.Player)
    music.playMelody("C5 - C5 - C5 C5 C5 - ", 500)
    game.showLongText("Welcome to Fairy Quest.", DialogLayout.Bottom)
    music.playMelody("C5 C5 - C5 - - C5 C5 ", 500)
    music.playMelody("C5 - C5 - C5 C5 C5 - ", 500)
    game.showLongText("The tulips are tricks don't touch them, if you do ghosts will come for you.", DialogLayout.Bottom)
    music.playMelody("C5 C5 - C5 C5 - C5 - ", 500)
    music.playMelody("C5 - C5 - C5 - - - ", 500)
    game.showLongText("Get the crystal orb for a power-up to help you.", DialogLayout.Bottom)
    music.playMelody("C5 - C5 - C5 - C5 C5 ", 500)
    game.showLongText("Good luck!!!", DialogLayout.Bottom)
}
controller.B.onEvent(ControllerButtonEvent.Pressed, function () {
    if (powerup == 1) {
        if (controller.right.isPressed() || count1 == 1) {
            projectile = sprites.createProjectileFromSprite(img`
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . a a a a . . . . . . 
                . . . . a a a a a a a . . . . . 
                . . . . . a a a a a a . . . . . 
                . . . . . a a a a a a . . . . . 
                . . . . . . . a a a . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                `, mySprite, 70, 0)
        }
        if (controller.left.isPressed() || count == 1) {
            projectile = sprites.createProjectileFromSprite(img`
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . a a a a . . . . . . 
                . . . . . a a a a a a a . . . . 
                . . . . . a a a a a a a a . . . 
                . . . . . a a a a a a . . . . . 
                . . . . . . . a a a . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                `, mySprite, -70, 0)
        }
    }
})
controller.A.onEvent(ControllerButtonEvent.Pressed, function () {
    if (mySprite.isHittingTile(CollisionDirection.Bottom)) {
        mySprite.vy = -200
    }
})
sprites.onOverlap(SpriteKind.Player, SpriteKind.lava, function (sprite, otherSprite) {
    game.over(false, effects.melt)
})
controller.left.onEvent(ControllerButtonEvent.Pressed, function () {
    count = 1
    count1 = 0
})
controller.right.onEvent(ControllerButtonEvent.Pressed, function () {
    count = 0
    count1 = 1
})
function lavas () {
    for (let value of tiles.getTilesByType(assets.tile`myTile0`)) {
        lavablck = sprites.create(img`
            44444444444444444444444444444444
            44244444444444444444444444444444
            44244444444444444444444442444444
            42244444444444444444444444444444
            44444444444444444444444444444444
            44444444444444444444444444444444
            44444444444444244444444444444444
            44444444444444424444444444444444
            44444444444444224444444444444444
            44444444444444244444444442444444
            44444444444444224444444422444444
            44444424444444424444444424444444
            44444444444444424444444444444444
            44444444444444424444444444444444
            44444442444444244444444444444444
            44444424444444244444444444444224
            44444424444444244444444444444244
            44444424444444244444444444444224
            44444422444444444444444444444424
            44444442444444444444444444444244
            44444442444444444444444444444444
            44444442444444444444444444444444
            44444444444444444444444444444444
            44444444444444444444444424444444
            44444444444444444444444422444444
            44444444444444444444444442444444
            44244444444444444444444422444444
            44224444444422444444444424444444
            44444422224422244444444444444444
            44444222224222224444444444424222
            22444222222222222222222242224222
            22222222222222222222222222222222
            `, SpriteKind.lava)
        tiles.placeOnTile(lavablck, value)
        tiles.setTileAt(value, assets.tile`transparency16`)
    }
    for (let value2 of tiles.getTilesByType(assets.tile`myTile1`)) {
        tulip = sprites.create(img`
            ........................
            ........................
            ........................
            ........................
            ........................
            ........................
            ........................
            ........................
            ........................
            ........................
            ........................
            ........................
            ........................
            ........................
            ........................
            ........................
            ........................
            ........................
            ........................
            ........................
            ...........333..........
            ...........333..........
            ..........7.7.7.........
            ...........777..........
            `, SpriteKind.flower)
        tiles.placeOnTile(tulip, value2)
        tiles.setTileAt(value2, assets.tile`transparency16`)
    }
}
sprites.onOverlap(SpriteKind.Player, SpriteKind.flower, function (sprite, otherSprite) {
    otherSprite.destroy(effects.disintegrate, 200)
    ooga = sprites.create(img`
        ........................
        ........................
        ........................
        ........................
        ..........ffff..........
        ........ff1111ff........
        .......fb111111bf.......
        .......f1111111df.......
        ......fd1111111ddf......
        ......fd111111dddf......
        ......fd111ddddddf......
        ......fd1dfbddddbf......
        ......fbddfcdbbbcf......
        .......f11111bbcf.......
        .......f1b1fffff........
        .......fbfc111bf........
        ........ff1b1bff........
        .........fbfbfff.f......
        ..........ffffffff......
        ............fffff.......
        ........................
        ........................
        ........................
        ........................
        `, SpriteKind.Enemy)
    ooga.follow(mySprite, 50)
    tiles.placeOnRandomTile(ooga, assets.tile`transparency16`)
})
sprites.onOverlap(SpriteKind.Player, SpriteKind.finish, function (sprite, flag) {
    game.over(true, effects.confetti)
})
sprites.onOverlap(SpriteKind.Player, SpriteKind.blocks, function (sprite, otherSprite) {
    mySprite.startEffect(effects.starField)
    block2.destroy()
    game.splash("Power Up!")
    powerup = 1
})
sprites.onOverlap(SpriteKind.Projectile, SpriteKind.Enemy, function (sprite, otherSprite) {
    otherSprite.destroy(effects.disintegrate, 500)
})
sprites.onOverlap(SpriteKind.Player, SpriteKind.Enemy, function (sprite, otherSprite) {
    info.changeLifeBy(-1)
    pause(1000)
})
let ooga: Sprite = null
let lavablck: Sprite = null
let count = 0
let projectile: Sprite = null
let count1 = 0
let narrator: Sprite = null
let powerup = 0
let block2: Sprite = null
let tulip: Sprite = null
let mySprite: Sprite = null
dialouge()
mySprite = sprites.create(img`
    . . . . . . 5 . 5 . . . . . . . 
    . . . . . f 5 5 5 f f . . . . . 
    . . . . f 1 5 2 5 1 6 f . . . . 
    . . . f 1 6 6 6 6 6 1 6 f . . . 
    . . . f 6 6 f f f f 6 1 f . . . 
    . . . f 6 f f d d f f 6 f . . . 
    . . f 6 f d f d d f d f 6 f . . 
    . . f 6 f d 3 d d 3 d f 6 f . . 
    . . f 6 6 f d d d d f 6 6 f . . 
    . f 6 6 f 3 f f f f 3 f 6 6 f . 
    . . f f d 3 5 3 3 5 3 d f f . . 
    . . f d d f 3 5 5 3 f d d f . . 
    . . . f f 3 3 3 3 3 3 f f . . . 
    . . . f 3 3 5 3 3 5 3 3 f . . . 
    . . . f f f f f f f f f f . . . 
    . . . . . f f . . f f . . . . . 
    `, SpriteKind.Player)
tiles.setTilemap(tilemap`level3`)
mySprite.ay = 400
tiles.placeOnTile(mySprite, tiles.getTileLocation(0, 6))
tiles.placeOnTile(tulip, tiles.getTileLocation(randint(5, 10), 13))
block2 = sprites.create(img`
    . . . . . . . . . . . . . . . . 
    . . . . . . 6 6 6 6 . . . . . . 
    . . . . 6 6 6 5 5 6 6 6 . . . . 
    . . . 7 7 7 7 6 6 6 6 6 6 . . . 
    . . 6 7 7 7 7 8 8 8 1 1 6 6 . . 
    . . 7 7 7 7 7 8 8 8 1 1 5 6 . . 
    . 6 7 7 7 7 8 8 8 8 8 5 5 6 6 . 
    . 6 7 7 7 8 8 8 6 6 6 6 5 6 6 . 
    . 6 6 7 7 8 8 6 6 6 6 6 6 6 6 . 
    . 6 8 7 7 8 8 6 6 6 6 6 6 6 6 . 
    . . 6 8 7 7 8 6 6 6 6 6 8 6 . . 
    . . 6 8 8 7 8 8 6 6 6 8 6 6 . . 
    . . . 6 8 8 8 8 8 8 8 8 6 . . . 
    . . . . 6 6 8 8 8 8 6 6 . . . . 
    . . . . . . 6 6 6 6 . . . . . . 
    . . . . . . . . . . . . . . . . 
    `, SpriteKind.blocks)
tiles.placeOnTile(block2, tiles.getTileLocation(5, 8))
info.setLife(3)
powerup = 0
let finline = sprites.create(img`
    .....6fceeeeeeeeee6.....
    ....6776eeeeeeeee676....
    ...6777666eeee6666776...
    ..67768e67766777667776..
    ...668ee7768867788666...
    ......ee77eeee77ecee....
    ......ee6eeeeee6eef.....
    ......eeeeeeeeeeeef.....
    ......eeeeeeeeeeeef.....
    ......eeeeeeeeeeecf.....
    ......ceeeeeeeeeecf.....
    ......ceeeeeeeeeeff.....
    ......feeeeeeeeeefe.....
    .....6feeeeeeeeeef6.....
    ....6776eeeeeeeee676....
    ...6777666eeee6667776...
    ..6776ee67777777667776..
    ...668ee7768867788666...
    ......ee77eeee67eeee....
    ......ee6eeeeee6cef.....
    ......eeeeeeeeeeeef.....
    ......eeeeeeeeeeeef.....
    ......eeeeeeeeeeecf.....
    ......eeeeeeeeeeecf.....
    ......eeeeeeeeeeeff.....
    ......feeeeeeeeeefe.....
    .....6feeeeeeeeeef6.....
    ....6776eeeeeeeee676....
    ...6777666eeee6667776...
    ..6776ee67777777667776..
    ...668ee7768867788666...
    ......ee77eeee67ee......
    ......ee6eeeeee6ce......
    ......eefeeeeeeece......
    ......eeceeeeeeece......
    ......eeceeeeeeefe......
    ......eeceeeeeeefe......
    ......eeeeeeeeeefe......
    ......eeeeeeeeeece......
    .....6eeeeeeeeeece6.....
    ....6776eeeeeeeee676....
    ...6776666eeee6766776...
    ..6776ee77777777667776..
    ...668ce7768867788666...
    ......ce77eeee67ee......
    ......eeeeeeeeeeee......
    ......eeeeeeeeeeee......
    ......eeeeeeeeeeee......
    ......eeeeeeeeeeee......
    ......eeeeeeeeeeee......
    ......eeeeeeeeeeee......
    ......eeeeeeeeeeee......
    ......beeeeeeeeeeb......
    .......beeeeeeeeb.......
    ........beeeeeeb........
    ........................
    `, SpriteKind.finish)
tiles.placeOnTile(finline, tiles.getTileLocation(59, 12))
lavas()
game.onUpdate(function () {
    mySprite.vx = controller.dx(3000)
    scene.cameraFollowSprite(mySprite)
})
